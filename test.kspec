Keyboard:KspecTest

Matrix:

  Row:     ESC F1  F2  F3  F4  F5  F6  F7  F8  F9  F10 F11 F12 PRS SCL PAU
  Row:     --- _`_  1   2   3   4   5  HME PUP END  6   7   8   9   0  _\_
  Row:     --- FN1  Q   W   E   R   T  TAB PDN BTB  Y   U   I   O   P  FN2
  Row:     --- LCT  A   S   D   F   G  ENT DEL ENT  H   J   K   L  _;_ RCT
  Row:     --- LSH  Z   X   C   V   B  ENT  UP ENT  N   M  _,_ _._ _/_ RSH
  Row:     --- FN3 CAP LAL LAL BAK BAK LFT DWN RGT SPC SPC RAL RAL  6N FN4
  Row:     --- --- --- --- --- --- --- LGU RGU --- --- --- --- --- --- ---

  ColPins: PC0 PC1 PC2 PC3 PC4 PC5 PC6 PC7 PD7 PD6 PD5 PD4 PD3 PD2 PD1 PD0
  RowPins: PA0 PA1 PA2 PA3 PA4 PA5 PA6

  LED:num_lock    pin:PF0 flow:source
  LED:caps_lock   pin:PF1 flow:sink
  LED:scroll_lock pin:PF2 flow:source
  LED:dv          pin:PF3 flow:sink

  BlockGhostKeys:yes

import "reference_layout.kspec"

KeyMap:Common

  Key:ESC     Map:ESCAPE                                   tl:"esc"

  Key:F1      Map:F1                                       tl:"F1"
  Key:F2      Map:F2                                       tl:"F2"
  Key:F3      Map:F3                                       tl:"F3"
  Key:F4      Map:F4                                       tl:"F4"
  Key:F5      Map:F5                                       tl:"F5"
  Key:F6      Map:F6                                       tl:"F6"
  Key:F7      Map:F7                                       tl:"F7"
  Key:F8      Map:F8                                       tl:"F8"
  Key:F9      Map:F9                                       tl:"F9"
  Key:F10     Map:F10                                      tl:"F10"
  Key:F11     Map:F11                                      tl:"F11"
  Key:F12     Map:F12                                      tl:"F12"

  Key:PRS     Map:PrintScreen                              tl:"F13"
  Key:SCL     Map:Scroll_Lock                              tl:"F14"
  Key:PAU     Map:Keyboard_Pause                           tl:"F15"

  Key:HME     Map:Home                                     tl:"Home"
  Key:END     Map:End                                      tl:"End"

  Key:INS     Map:Insert                                   tl:"Insert"
  Key:DEL     Map:Delete_Forward                           tl:"Delete"

  Key:PUP     Map:PageUp                                   tl:"Page Up"
  Key:PDN     Map:PageDown                                 tl:"Page Down"

  Key:_\_     Map:_\_and_|                                 tl:"\\"
  Key:FN1     Mode:Fn1 type:momentary                      tl:"Fn1"
  Key:TAB     Map:z_and_Z <gui>                            tl:"Undo"
  Key:BTB     Map:z_and_Z <gui|shift>                      tl:"Redo"
  Key:FN2     Mode:Fn2 type:momentary                      tl:"Fn2"
  Key:LCT     Map:Left_Control                             tl:"Ctrl"
  Key:ENT     Map:Return_or_Enter                          tl:"Return"
  Key:RCT     Map:Right_Control                            tl:"Ctrl"
  Key:LSH     Map:Left_Shift                               tl:"Shift"
  Key:UP      Map:UpArrow                                  tl:"{up}"
  Key:RSH     Map:Right_Shift                              tl:"Shift"
  Key:FN3     Mode:Fn3 type:momentary                      tl:"Fn3"
  Key:CAP     Map:Caps_Lock                                tl:"Caps"
  Key:LAL     Map:Left_Alt                                 tl:"Option"
  Key:LGU     Map:Left_GUI                                 tl:"Command"
  Key:LFT     Map:LeftArrow                                tl:"{left}"
  Key:DWN     Map:DownArrow                                tl:"{down}"
  Key:RGT     Map:RightArrow                               tl:"{right}"
  Key:SPC     Map:Spacebar                                 tl:"Space"
  Key:RAL     Map:Right_Alt                                tl:"Option"
  Key:FN4     Mode:Fn4 type:momentary                      tl:"Fn4"
  Key:BAK     Map:Backspace                                tl:"Backspace"

KeyMap:US base:Common

  Key:_`_     Map:_`_and_~                                 tl:"~"  bl:"`"
  Key:1       Map:1_and_!                                  tl:"!"  bl:"1"
  Key:2       Map:2_and_@                                  tl:"@"  bl:"2"
  Key:3       Map:3_and_#                                  tl:"#"  bl:"3"
  Key:4       Map:4_and_$                                  tl:"$"  bl:"4"
  Key:5       Map:5_and_%                                  tl:"%"  bl:"5"
  Key:6       Map:6_and_^                                  tl:"^"  bl:"6"
  Key:7       Map:7_and_&                                  tl:"&"  bl:"7"
  Key:8       Map:8_and_*                                  tl:"*"  bl:"8"
  Key:9       Map:9_and_(                                  tl:"("  bl:"9"
  Key:0       Map:0_and_)                                  tl:")"  bl:"0"
  Key:Q       Map:q_and_Q                                  tl:"Q"
  Key:W       Map:w_and_W                                  tl:"W"
  Key:E       Map:e_and_E                                  tl:"E"
  Key:R       Map:r_and_R                                  tl:"R"
  Key:T       Map:t_and_T                                  tl:"T"
  Key:Y       Map:y_and_Y                                  tl:"Y"
  Key:U       Map:u_and_U                                  tl:"U"
  Key:I       Map:i_and_I                                  tl:"I"
  Key:O       Map:o_and_O                                  tl:"O"
  Key:P       Map:p_and_P                                  tl:"P"
  Key:A       Map:a_and_A                                  tl:"A"
  Key:S       Map:s_and_S                                  tl:"S"
  Key:D       Map:d_and_D                                  tl:"D"
  Key:F       Map:f_and_F                                  tl:"F"
  Key:G       Map:g_and_G                                  tl:"G"
  Key:H       Map:h_and_H                                  tl:"H"
  Key:J       Map:j_and_J                                  tl:"J"
  Key:K       Map:k_and_K                                  tl:"K"
  Key:L       Map:l_and_L                                  tl:"L"
  Key:Z       Map:z_and_Z                                  tl:"Z"
  Key:X       Map:x_and_X                                  tl:"X"
  Key:C       Map:c_and_C                                  tl:"C"
  Key:V       Map:v_and_V                                  tl:"V"
  Key:B       Map:b_and_B                                  tl:"B"
  Key:N       Map:n_and_N                                  tl:"N"
  Key:M       Map:m_and_M                                  tl:"M"
  Key:_,_     Map:_,_and_<                                  tl:"<"  bl:","
  Key:_._     Map:_._and_>                                  tl:">"  bl:"."
  Key:_/_     Map:_/_and_?                                  tl:"?"  bl:"/"

KeyMap:DV base:US default

  Key:_'_     Map:squote_and_dquote                        tl:"\"" bl:"\'"
  Key:_,_     Map:_,_and_<                                 tl:"<"  bl:","
  Key:_._     Map:_._and_>                                 tl:">"  bl:"."
  Key:P       Map:p_and_P                                  tl:"P"
  Key:Y       Map:y_and_Y                                  tl:"Y"
  Key:F       Map:f_and_F                                  tl:"F"
  Key:G       Map:g_and_G                                  tl:"G"
  Key:C       Map:c_and_C                                  tl:"C"
  Key:R       Map:r_and_R                                  tl:"R"
  Key:L       Map:l_and_L                                  tl:"L"
  Key:O       Map:o_and_O                                  tl:"O"
  Key:E       Map:e_and_E                                  tl:"E"
  Key:U       Map:u_and_U                                  tl:"U"
  Key:I       Map:i_and_I                                  tl:"I"
  Key:D       Map:d_and_D                                  tl:"D"
  Key:H       Map:h_and_H                                  tl:"H"
  Key:T       Map:t_and_T                                  tl:"T"
  Key:N       Map:n_and_N                                  tl:"N"
  Key:S       Map:s_and_S                                  tl:"S"
  Key:_;_     Map:_;_and_:                                 tl:":"  bl:";"
  Key:Q       Map:q_and_Q                                  tl:"Q"
  Key:J       Map:j_and_J                                  tl:"J"
  Key:K       Map:k_and_K                                  tl:"K"
  Key:X       Map:x_and_X                                  tl:"X"
  Key:B       Map:b_and_B                                  tl:"B"
  Key:M       Map:m_and_M                                  tl:"M"
  Key:W       Map:w_and_W                                  tl:"W"
  Key:V       Map:v_and_V                                  tl:"V"
  Key:Z       Map:z_and_Z                                  tl:"Z"

KeyMap:pDV base:DV

  Key:_`_     Map:4_and_$ <shift>                          bl:"$"
    | <shift> Map:_`_and_~ <shift>                         tl:"~"
  Key:1       Map:7_and_& <shift>                          bl:"&"
    | <shift> Map:5_and_% <shift>                          tl:"%"
  Key:2       Map:_[_and_{                                 bl:"["
    | <shift> Map:7_and_&                                  tl:"7"
  Key:3       Map:_[_and_{ <shift>                         bl:"{"
    | <shift> Map:5_and_%                                  tl:"5"
  Key:4       Map:_]_and_} <shift>                         bl:"}"
    | <shift> Map:3_and_#                                  tl:"3"
  Key:5       Map:9_and_( <shift>                          bl:"("
    | <shift> Map:1_and_!                                  tl:"1"
  Key:6       Map:_=_and_+                                 bl:"="
    | <shift> Map:9_and_(                                  tl:"9"
  Key:7       Map:8_and_* <shift>                          bl:"*"
    | <shift> Map:0_and_)                                  tl:"0"
  Key:8       Map:0_and_) <shift>                          bl:")"
    | <shift> Map:2_and_@                                  tl:"2"
  Key:9       Map:_=_and_+ <shift>                         bl:"+"
    | <shift> Map:4_and_$                                  tl:"4"
  Key:0       Map:_]_and_}                                 bl:"]"
    | <shift> Map:6_and_^                                  tl:"6"
  Key:_-_     Map:1_and_! <shift>                          bl:"!"
    | <shift> Map:8_and_*                                  tl:"8"
  Key:_=_     Map:3_and_# <shift>                          bl:"#"
    | <shift> Map:_`_and_~                                 tl:"'"

KeyMap:Colemak base:Common

  Key:_`_     Map:_`_and_~                                 tl:"~"  bl:"`"
  Key:1       Map:1_and_!                                  tl:"!"  bl:"1"
  Key:2       Map:2_and_@                                  tl:"@"  bl:"2"
  Key:3       Map:3_and_#                                  tl:"#"  bl:"3"
  Key:4       Map:4_and_$                                  tl:"$"  bl:"4"
  Key:5       Map:5_and_%                                  tl:"%"  bl:"5"
  Key:6       Map:6_and_^                                  tl:"^"  bl:"6"
  Key:7       Map:7_and_&                                  tl:"&"  bl:"7"
  Key:8       Map:8_and_*                                  tl:"*"  bl:"8"
  Key:9       Map:9_and_(                                  tl:"("  bl:"9"
  Key:0       Map:0_and_)                                  tl:")"  bl:"0"
  Key:Q       Map:q_and_Q                                  tl:"Q"
  Key:W       Map:w_and_W                                  tl:"W"
  Key:F       Map:f_and_F                                  tl:"F"
  Key:P       Map:p_and_P                                  tl:"P"
  Key:G       Map:g_and_G                                  tl:"G"
  Key:J       Map:j_and_J                                  tl:"J"
  Key:L       Map:l_and_L                                  tl:"L"
  Key:U       Map:u_and_U                                  tl:"U"
  Key:Y       Map:y_and_Y                                  tl:"Y"
  Key:_;_     Map:_;_and_:                                 tl:";"
  Key:A       Map:a_and_A                                  tl:"A"
  Key:R       Map:r_and_R                                  tl:"R"
  Key:S       Map:s_and_S                                  tl:"S"
  Key:T       Map:t_and_T                                  tl:"T"
  Key:D       Map:d_and_D                                  tl:"D"
  Key:H       Map:h_and_H                                  tl:"H"
  Key:N       Map:n_and_N                                  tl:"N"
  Key:E       Map:e_and_E                                  tl:"E"
  Key:I       Map:i_and_I                                  tl:"I"
  Key:O       Map:o_and_O                                  tl:"O"
  Key:Z       Map:z_and_Z                                  tl:"Z"
  Key:X       Map:x_and_X                                  tl:"X"
  Key:C       Map:c_and_C                                  tl:"C"
  Key:V       Map:v_and_V                                  tl:"V"
  Key:B       Map:b_and_B                                  tl:"B"
  Key:K       Map:k_and_K                                  tl:"K"
  Key:M       Map:m_and_M                                  tl:"M"
  Key:_,_     Map:_,_and_<                                 tl:"<"  bl:","
  Key:_._     Map:_._and_>                                 tl:">"  bl:"."
  Key:_/_     Map:_/_and_?                                 tl:"?"  bl:"/"

KeyMap:Fn1 base:Common

  Key:2       Map:Tab <shift>                              tl:"Back Tab"
  Key:3       Map:Tab                                      tl:"Tab"
  Key:Q       Map:z_and_Z <gui|shift>                      tl:"Redo"
  Key:W       Map:x_and_X <gui>                            tl:"Cut"
  Key:E       Map:c_and_C <gui>                            tl:"Copy"
  Key:R       Map:v_and_V <gui>                            tl:"Paste"
  Key:T       Map:z_and_Z <gui>                            tl:"Undo"
  Key:Y       Map:Keypad_ENTER                             tl:"Enter"
  Key:U       Map:Home                                     tl:"Home"
  Key:I       Map:UpArrow                                  tl:"{up}"
  Key:O       Map:End                                      tl:"End"
  Key:P       Map:PageUp                                   tl:"Page Up"
  Key:FN2     Map:Tab                                      tl:"Tab"
  Key:D       Macro:                                       tl:"Transpose"
               Map:RightArrow <shift>
               Map:x_and_X <gui>
               Map:LeftArrow
               Map:v_and_V <gui>
  Key:F       Macro:                                       tl:"Delete word right"
               Map:RightArrow <shift|control>
               Map:Delete_Forward
  Key:H       Map:Delete_Forward                           tl:"Delete"
  Key:J       Map:LeftArrow                                tl:"{left}"
  Key:K       Map:DownArrow                                tl:"{down}"
  Key:L       Map:RightArrow                               tl:"{right}"
  Key:_;_     Map:PageDown                                 tl:"Page Down"
  Key:N       Map:Backspace                                tl:"Backspace"

KeyMap:Fn2 base:Common

  Key:FN1     Map:Tab                                      tr:"tab"
  Key:Q       Map:_=_and_+ <shift>                         tr:"+"
  Key:A       Map:_=_and_+                                 tr:"="
  Key:Z       Macro:                                       tr:"!="
                Map:1_and_! <shift>
                Map:_=_and_+
  Key:W       Map:9_and_( <shift>                          tr:"("
  Key:R       Map:0_and_) <shift>                          tr:")"
  Key:S       Map:_[_and_{ <shift>                         tr:"{"
  Key:F       Map:_]_and_} <shift>                         tr:"}"
  Key:X       Map:_[_and_{                                 tr:"["
  Key:V       Map:_]_and_}                                 tr:"]"
  Key:T       Map:_/_and_? <shift>                         tr:"?"
  Key:G       Map:_-_and_Underscore                        tr:""
  Key:B       Map:_-_and_Underscore <shift>                tr:"-"
  Key:E       Map:_\_and_| <shift>                         tr:"|"
    | <shift> Macro:                                       tr:"||"
                Map:_\_and_| <shift>
                Map:_\_and_| <shift>
  Key:D       Map:_/_and_?                                 tr:"/"
    | <shift> Macro:                                       tr:"//"
                Map:_/_and_?
                Map:_/_and_?
  Key:C       Map:_\_and_|                                 tr:"\\"

KeyMap:Fn3 base:Common

    Key:U     Map:Keypad_Num_Lock_and_Clear                bl:"N. Lock"
    Key:I     Map:Keypad_/                                 bl:"/"
    Key:O     Map:Keypad_*                                 bl:"*"
    Key:P     Map:Keypad_-                                 bl:"-"
    Key:H     Map:Keypad_7_and_Home                        bl:"7"
    Key:K     Map:Keypad_8_and_Up_Arrow                    bl:"8"
    Key:L     Map:Keypad_9_and_PageUp                      bl:"9"
    Key:_;_   Map:Keypad_+                                 bl:"+"
    Key:M     Map:Keypad_4_and_Left_Arrow                  bl:"4"
    Key:_,_   Map:Keypad_5                                 bl:"5"
    Key:_._   Map:Keypad_6_and_Right_Arrow                 bl:"6"
    Key:_/_   Map:Keypad_+                                 bl:"+"
    Key:_/_   Map:Keypad_1_and_End                         bl:"1"
    Key:_,_   Map:Keypad_2_and_Down_Arrow                  bl:"2"
    Key:_._   Map:Keypad_3_and_PageDn                      bl:"3"
    Key:_/_   Map:Keypad_ENTER                             bl:"Enter"
    Key:SPC   Map:Keypad_0_and_Insert                      bl:"0"
    Key:RAL   Map:Keypad_._and_Delete                      bl:"."
    Key:X1    Map:Keypad_ENTER                             bl:"Enter"

KeyMap:Fn4 base:Common

    Key:F1    Mode:US type:toggle                          br:"US"
    Key:F2    Mode:DV led:Dvorak type:toggle               br:"Dvorak"
    Key:F3    Mode:pDV led:Dvorak type:toggle              br:"pDvorak"
    Key:F4    Mode:Colemak type:toggle                     br:"Colemak"
    Key:PAU   Macro:                                       br:"info"
                Map:h_and_H <shift>
                Map:u_and_U
                Map:m_and_M
                Map:b_and_B
                Map:l_and_L
                Map:e_and_E
                Map:h_and_H <shift>
                Map:a_and_A
                Map:c_and_C
                Map:k_and_K
                Map:e_and_E
                Map:r_and_R
                Map:Spacebar
                Map:i_and_I <shift>
                Map:Return_or_Enter
    Key:PRS   Map:System_Power_Down page:Generic_Desktop   br:"Power"
    Key:SCL   Map:System_Sleep page:Generic_Desktop        br:"Sleep"
    Key:PAU   Map:System_Wake_Up page:Generic_Desktop      br:"Wake"
    Key:G     Macro:                                       br:"->"
                Map:_-_and_Underscore
                Map:_._and_> <shift>
